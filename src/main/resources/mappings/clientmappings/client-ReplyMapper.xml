<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.spring.hotelspace.client.board.dao.ClientReplyDAO">
	<select id="ReplyAll" parameterType="ClientReplyVO"
		resultType="ClientReplyVO">
		SELECT C.CLIENT_ID,
		C.CLIENT_NAME,
		R.CLAIM_NUM,
		R.REPLY_NUM,
		R.REPLY_CONTENT,
		CASE WHEN TO_CHAR(R.REPLY_DATE,'YYYY/MM/DD') =
		TO_CHAR(SYSDATE,'YYYY/MM/DD') THEN TO_CHAR(R.REPLY_DATE,'HH24:MI:SS')
		ELSE TO_CHAR(R.REPLY_DATE,'YYYY/MM/DD') END AS REPLY_DATE,
		CASE WHEN TO_CHAR(R.REPLY_ADATE,'YYYY/MM/DD') =
		TO_CHAR(SYSDATE,'YYYY/MM/DD') THEN TO_CHAR(R.REPLY_ADATE,'HH24:MI:SS')
		ELSE TO_CHAR(R.REPLY_ADATE,'YYYY/MM/DD') END AS REPLY_ADATE
		FROM CLIENT
		C, REPLY R
		WHERE CLAIM_NUM = #{claimNum} and c.client_id = R.client_id
		ORDER BY
		R.REPLY_NUM desc
	</select>
	<insert id="ReplyInsert" parameterType="ClientReplyVO">

		insert into REPLY(CLAIM_NUM, REPLY_NUM, REPLY_CONTENT,CLIENT_ID,reply_date,reply_Adate)
		values(#{claimNum}, REPLY_SEQ.nextval, #{replyContent},
		#{clientId},SYSDATE,SYSDATE)
	</insert>

	<update id="ReplyUpdate" parameterType="ClientReplyVO">
	
		UPDATE REPLY SET
		REPLY_CONTENT = #{replyContent},
		REPLY_ADATE = SYSDATE
		WHERE REPLY_NUM = #{replyNum}

	</update>

	<delete id="ReplyDelete" parameterType="int">
		DELETE FROM REPLY
		WHERE
		REPLY_NUM = #{replyNum}

	</delete>
	<!-- <resultMap type="#modelname" id="YourResultSet"> <id property="param1" 
		column="columnname1" /> <result property="param2" column="columnname2" /> 
		<result property="param3" column="columnname3" /> </resultMap> <select id="getAll" 
		resultMap="YourResultSet"> SELECT * FROM tablename1 </select> <insert id="insertSomething" 
		parameterType="#modelname"> INSERT INTO tablename1 (columnname1, columnname2, 
		columnname3) VALUES(#{value1},#{value2},#{value3}) </insert> <update id="updateSomething" 
		parameterType="#modelname"> UPDATE tablename1 SET columnname1=#{param1} WHERE 
		columnname2 = #{param2} </update> <delete id="deleteSomething" parameterType="int"> 
		DELETE FROM tablename1 WHERE columnname1 = #{param1} </delete> -->

</mapper>
